@inherits UmbracoViewPage<NewsLandingViewModel>
@using Constants = NKN.Core.Constants.Constants

@{
	Html.EnableClientValidation(true);
	Html.EnableUnobtrusiveJavaScript(true);
}

@if (Model.Banner != null)
{

	Html.RenderAction<LayoutController>(c => nameof(c.Banner), new { viewModel = Model.Banner });

}

@if (TempData[Constants.TempDataArchiveNews] != null)
{

	Html.RenderPartial("_NewsArchive");
}
else
{
	<section class="feed-wrapper news-wrapper news-top-wrapper">
		<div class="wrapper">
			<div class="feed-list">
				@foreach (var newsPreview in Model.FirstRowNews)
				{
					if (newsPreview != null)
					{
						Html.RenderPartial("_NewsDetailPreview", newsPreview);
					}
				}
			</div>
			@{Html.RenderPartial("_NewsDetailHighlightedPreview", Model.HighlightedNewsPreview);}
		</div>
	</section>

	<section class="feed-wrapper news-wrapper">
		<div class="wrapper">
			<div class="feed-list">
				@foreach (var newsPreview in Model.SecondRowNews)
				{
					if (newsPreview != null)
					{
						Html.RenderPartial("_NewsDetailPreview", newsPreview);
					}
				}
			</div>
		</div>
	</section>
	if (Model.NewsletterBlock != null)
	{
		Html.RenderAction<NestedContentController>(c => nameof(c.NewsletterBlock), new { viewModel = Model.NewsletterBlock });
	}
	<section class="feed-wrapper news-wrapper">
		<div class="wrapper">
			<div class="feed-list">
				@foreach (var newsPreview in Model.LastRowItems)
				{
					if (newsPreview != null)
					{
						Html.RenderPartial("_NewsDetailPreview", newsPreview);
					}
				}
			</div>
		</div>
	</section>
	<div>
		@if (Model.ArchiveNews != null && Model.ArchiveNews.Any())
		{
		using (Html.BeginUmbracoForm("NewsArchive", "NewsArchive", FormMethod.Get))
		{
		<button type="submit" class="btn">@UmbracoDictionary.NewsLanding.Archive</button>
		}
		}

	</div>


	if (Model.ContactBlock != null)
	{
		Html.RenderAction<NestedContentController>(c => nameof(c.WriteUs), new { viewModel = Model.ContactBlock });
	}


}

